# Requirements - Gemini Live API PoC

## 背景・目的

### 背景

宿題コーチロボットは、小学校低学年向けのリアルタイム音声アシスタントです。プロジェクトの核心技術である**Google ADK + Gemini Live API**の双方向音声ストリーミングが期待通り動作するかを、本格実装前に検証する必要があります。

### 目的

1. Gemini Live APIの基本動作を確認する
2. 日本語音声対話の品質を評価する
3. 技術的課題を早期に特定し、設計にフィードバックする
4. 本格実装に向けた技術的な見通しを得る

## 要求事項

### 機能要件

1. **音声入力の受信**
   - マイクからの音声をリアルタイムで受信
   - 音声データをWebSocket経由でバックエンドに送信

2. **Gemini Live APIとの双方向通信**
   - ADK + Gemini Live APIを使用した音声ストリーミング
   - ユーザーの発話をリアルタイムで処理
   - エージェントからの音声応答を受信

3. **音声出力の再生**
   - エージェントからの音声応答をリアルタイムで再生
   - 低遅延での再生を目指す

4. **日本語対応**
   - 日本語での音声認識
   - 日本語での音声合成

5. **基本的な対話能力**
   - シンプルな挨拶と応答
   - ソクラテス式対話の雰囲気を持つプロンプト設定

### 非機能要件

1. **遅延**: 発話から応答開始まで2秒以内を目標
2. **音声品質**: 聞き取りやすい音声品質
3. **接続安定性**: 5分以上の連続対話が可能

### 制約条件

1. **技術スタック**
   - バックエンド: Python 3.11+ / FastAPI / uv
   - AI: Google ADK + Gemini Live API
   - モデル: `gemini-live-2.5-flash-preview-native-audio`

2. **開発環境**
   - ローカル開発環境での動作確認
   - Google AI Studio APIキー使用（Vertex AIは本番で検討）

3. **スコープ限定**
   - UIは最小限（ブラウザベースの簡易テストページ）
   - 認証・セッション管理は省略
   - データ永続化は省略

## 対象範囲

### In Scope

- バックエンド（FastAPI + WebSocket + ADK）の実装
- Gemini Live APIとの接続
- 日本語音声対話の動作確認
- 簡易的なブラウザテストページ（HTML/JavaScript）
- 基本的なエラーハンドリング

### Out of Scope

- 本格的なフロントエンド（Next.js）
- 認証・認可
- データベース連携
- CI/CD
- デプロイ
- 3段階ヒントシステムの完全実装
- 感情認識
- 画像認識

## 成功基準

1. **必須**
   - [ ] Gemini Live APIに接続でき、音声データを送受信できる
   - [ ] 日本語での音声入力が認識される
   - [ ] 日本語での音声出力が再生される
   - [ ] 基本的な対話が成立する

2. **望ましい**
   - [ ] 遅延が2秒以内
   - [ ] 5分以上の連続対話が安定して動作
   - [ ] ソクラテス式対話のプロンプトが適切に機能

3. **検証項目**
   - 音声認識の精度（特に子供の声への対応）
   - 音声合成の自然さ
   - WebSocket接続の安定性
   - エラー発生時の挙動
