# Requirements - ProgressDisplay拡張（教科・トピック対応）

## 背景・目的

Phase 2bのマルチエージェント実装に伴い、バックエンドから教科（算数/国語）、トピック、思考の傾向の情報が送信されるようになった。これらの情報をフロントエンドの学習進捗表示（`ProgressDisplay`コンポーネント）に追加し、子供と保護者が学習状況をより詳細に把握できるようにする。

**関連Issue**: #68

## 要求事項

### 機能要件

#### 1. 現在の教科表示
- `LearningProgress.currentSubject`（`"math"` | `"japanese"`）を表示
- 教科に応じたアイコンとカラーを使用:
  - 算数: 🧮 アイコン、青系カラー（`bg-blue-100`, `text-blue-600`）
  - 国語: 📖 アイコン、緑系カラー（`bg-green-100`, `text-green-600`）
- 教科が未設定（`undefined`）の場合は表示しない

#### 2. 現在のトピック表示
- `LearningProgress.currentTopic`（文字列）を表示
- トピックが未設定（`undefined`）の場合は表示しない

#### 3. 思考の傾向サマリー表示
- `LearningProgress.thinkingTendencies`（`ThinkingTendencies`型）を視覚的に表示
- 表示項目:
  - `persistenceScore`: 粘り強さ（0〜100）
  - `independenceScore`: 自立度（0〜100）
  - `reflectionQuality`: 振り返りの質（0〜100）
  - `hintDependency`: ヒント依存度（0〜100、低いほど良い）
- 各項目を進捗バー（プログレスバー）で表示
- 未設定（`undefined`）の場合は表示しない

#### 4. レスポンシブデザイン
- モバイル（375px）からデスクトップまで適切に表示
- 既存の進捗表示とバランスの良いレイアウト

### 非機能要件

#### パフォーマンス
- コンポーネントの再レンダリングを最小限に抑える
- 不要な計算を避ける

#### アクセシビリティ
- スクリーンリーダー対応（aria-label）
- 適切なセマンティックHTML要素の使用
- カラーだけでなくアイコンやテキストでも情報を伝達

#### テスト
- 各表示項目のテストケースを網羅
- 未設定（`undefined`）時の表示テスト
- スナップショットテスト

### 制約条件

1. **既存機能の維持**: 既存の進捗表示（自分で・ヒントで・一緒に）は変更しない
2. **型安全性**: TypeScript strict modeでエラーが出ないこと
3. **TDD原則**: テストファーストで実装
4. **Tailwind CSS使用**: インラインスタイルは使用しない
5. **Biome準拠**: リンターエラーが出ないこと

## 対象範囲

### In Scope

- `ProgressDisplay.tsx`の拡張
- `ProgressDisplay.test.tsx`の更新
- 教科アイコン・カラーの実装
- 思考の傾向の視覚化（プログレスバー）

### Out of Scope

- バックエンドの型定義変更（既に完了済み）
- WebSocketハンドラの変更
- Jotai atomsの変更
- 他のUIコンポーネントへの影響

## 成功基準

1. ✅ `LearningProgress`の拡張フィールドが正しく表示される
2. ✅ 教科に応じたアイコンとカラーが表示される
3. ✅ 思考の傾向が視覚的に分かりやすく表示される
4. ✅ 未設定フィールドは表示されない（エラーが出ない）
5. ✅ テストカバレッジ80%以上
6. ✅ `bun lint && bun typecheck && bun test` がすべてパス
7. ✅ レスポンシブデザインが機能する
8. ✅ アクセシビリティチェックが通る
