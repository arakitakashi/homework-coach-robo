# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

---

## ğŸš¨ å®Ÿè£…ã‚¿ã‚¹ã‚¯é–‹å§‹å‰ã®å¿…é ˆãƒã‚§ãƒƒã‚¯

**å®Ÿè£…ã‚¿ã‚¹ã‚¯ã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€å¿…ãš `.claude/rules/pre-implementation-checklist.md` ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’å®Œäº†ã™ã‚‹ã“ã¨ã€‚**

å®Œäº†ã™ã‚‹ã¾ã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå§‹ã‚ã¦ã¯ãªã‚‰ãªã„ã€‚è©³ç´°ã¯ãƒ«ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã€‚

---

## Project Overview

**å®¿é¡Œã‚³ãƒ¼ãƒãƒ­ãƒœãƒƒãƒˆ (Homework Coach Robot)** ã¯ã€å°å­¦æ ¡ä½å­¦å¹´ï¼ˆ1ã€œ3å¹´ç”Ÿï¼‰å‘ã‘ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚ç­”ãˆã‚’ã™ãã«æ•™ãˆã‚‹ã®ã§ã¯ãªãã€ã‚½ã‚¯ãƒ©ãƒ†ã‚¹å¼å¯¾è©±ã§å­ä¾›ãŒè‡ªåˆ†ã§è€ƒãˆã€è‡ªåˆ†ã§æ°—ã¥ããƒ—ãƒ­ã‚»ã‚¹ã‚’æ”¯æ´ã—ã¾ã™ã€‚

### Core Philosophy

- **ç­”ãˆã‚’æ•™ãˆãªã„**: è³ªå•ã§å­ä¾›ã‚’å°ãï¼ˆã‚½ã‚¯ãƒ©ãƒ†ã‚¹å¼å¯¾è©±ï¼‰
- **ãƒ—ãƒ­ã‚»ã‚¹ã‚’è©•ä¾¡**: æ­£è§£/ä¸æ­£è§£ã§ã¯ãªãã€è€ƒãˆãŸãƒ—ãƒ­ã‚»ã‚¹ã‚’é‡è¦–
- **æ„Ÿæƒ…ã«é©å¿œ**: éŸ³å£°ãƒˆãƒ¼ãƒ³åˆ†æã§ãƒ•ãƒ©ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ãƒ™ãƒ«ã‚’æ¤œçŸ¥ã—ã€ã‚µãƒãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ã‚’èª¿æ•´
- **å¯¾ç­‰ãªé–¢ä¿‚**: AIã¯ã€Œå®Œç’§ãªå…ˆç”Ÿã€ã§ã¯ãªãã€Œä¸€ç·’ã«æ‚©ã‚€ä»²é–“ã€ã¨ã—ã¦æŒ¯ã‚‹èˆã†

## Architecture Principles

### 3æ®µéšãƒ’ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 

å­ä¾›ãŒã€Œç­”ãˆã‚’ã™ãæ•™ãˆã¦ã€ã¨è¦æ±‚ã—ãŸå ´åˆã§ã‚‚ã€æ®µéšçš„ã«ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ï¼š

1. **ãƒ¬ãƒ™ãƒ«1: å•é¡Œç†è§£ã®ç¢ºèª** - å•é¡Œæ–‡ã®å†ç¢ºèªã‚’ä¿ƒã™
2. **ãƒ¬ãƒ™ãƒ«2: æ—¢ç¿’äº‹é …ã®æƒ³èµ·** - é–¢é€£ã™ã‚‹çŸ¥è­˜ã‚’æ€ã„å‡ºã•ã›ã‚‹
3. **ãƒ¬ãƒ™ãƒ«3: éƒ¨åˆ†çš„æ”¯æ´** - å•é¡Œã‚’å°ã•ãåˆ†è§£ã—ã€æœ€åˆã®éƒ¨åˆ†ã®ã¿æ”¯æ´

å®Ÿè£…æ™‚ã¯ã€ã“ã®æ®µéšã‚’é£›ã°ã•ãšã€å¿…ãšé †ç•ªã«æä¾›ã™ã‚‹ã“ã¨ã€‚

### ã‚½ã‚¯ãƒ©ãƒ†ã‚¹å¼å¯¾è©±ã‚¨ãƒ³ã‚¸ãƒ³

å¯¾è©±ç”Ÿæˆæ™‚ã®é‡è¦ãªåŸå‰‡ï¼š

- å­ä¾›ã®å›ç­”ã«å¿œã˜ã¦æ¬¡ã®è³ªå•ã‚’**å‹•çš„ã«ç”Ÿæˆ**
- æœ€çµ‚çš„ã«å­ä¾›è‡ªèº«ãŒç­”ãˆã«æ°—ã¥ãã‚ˆã†ã«èª˜å°
- è³ªå•ã®ä¾‹:
  - ã€Œã“ã®å•é¡Œã€ä½•ã‚’èã„ã¦ã‚‹ã¨æ€ã†ï¼Ÿã€
  - ã€Œã‚‚ã—â—‹â—‹ã ã£ãŸã‚‰ã©ã†ãªã‚‹ã‹ãªï¼Ÿã€
  - ã€ŒåŒã˜ã‚ˆã†ãªå•é¡Œã€å‰ã«ã‚„ã£ãŸã‚ˆã­ï¼Ÿã€

### æ„Ÿæƒ…èªè­˜ã¨é©å¿œ

éŸ³å£°ã®ãƒˆãƒ¼ãƒ³åˆ†æã«åŸºã¥ãé©å¿œãƒ­ã‚¸ãƒƒã‚¯ï¼š

- **ã‚¤ãƒ©ã‚¤ãƒ©ã—ã¦ã„ã‚‹** â†’ ã‚ˆã‚Šå°ã•ã„ã‚¹ãƒ†ãƒƒãƒ—ã«åˆ†è§£
- **æ¥½ã—ãã†ãƒ»è‡ªä¿¡ãŒã‚ã‚‹** â†’ å°‘ã—é›£æ˜“åº¦ã‚’ä¸Šã’ã‚‹
- **ç–²ã‚Œã¦ã„ã‚‹** â†’ ä¼‘æ†©ã‚’ææ¡ˆ

### è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 

å­¦ç¿’ãƒ—ãƒ­ã‚»ã‚¹ã®å¯è¦–åŒ–ï¼š

- ã€Œè‡ªåˆ†ã§æ°—ã¥ã„ãŸã€â†’ 3ãƒã‚¤ãƒ³ãƒˆ
- ã€Œãƒ’ãƒ³ãƒˆã§æ°—ã¥ã„ãŸã€â†’ 2ãƒã‚¤ãƒ³ãƒˆ
- ã€Œä¸€ç·’ã«è§£ã„ãŸã€â†’ 1ãƒã‚¤ãƒ³ãƒˆ

æ­£è§£/ä¸æ­£è§£ã ã‘ã§ãªãã€ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¨˜éŒ²ã™ã‚‹ã“ã¨ã€‚

## Technical Stack

### MVP Phase (ãƒ•ã‚§ãƒ¼ã‚º1)

- **Frontend**: Next.js 16 (App Router) + Bun + Biome
- **Backend**: FastAPI + Python 3.10+ + uv + Ruff
- **Infrastructure**: Google Cloud Run
- **Database**: Cloud Firestore (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿), BigQuery (åˆ†æç”¨ãƒ‡ãƒ¼ã‚¿)
- **Session Management**: Vertex AI / ADK SessionService
- **AI/ML**: Google ADK + Gemini Live API
- **STT**: Cloud Speech-to-Text API
- **TTS**: Cloud Text-to-Speech API
- **Vision**: Gemini Vision + Cloud Vision API (ç”»åƒèªè­˜)

### Phase 2 Extensions

- éŸ³å£°æ„Ÿæƒ…èªè­˜AI
- ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ ï¼ˆå†’é™ºã‚¹ãƒˆãƒ¼ãƒªãƒ¼å‹ã®å®¿é¡Œé€²è¡Œï¼‰
- ä¿è­·è€…å‘ã‘ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

## Key Design Decisions

### UI/UX Principles

1. **ãƒãƒ³ã‚ºãƒ•ãƒªãƒ¼æ“ä½œ**: ä½å­¦å¹´ã®å…ç«¥ã¯ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œãŒè‹¦æ‰‹ãªãŸã‚ã€éŸ³å£°ã®ã¿ã§å®Œçµ
2. **å£°ã®ãƒˆãƒ¼ãƒ³å¤‰åŒ–**: åŠ±ã¾ã™æ™‚ã€èª¬æ˜ã™ã‚‹æ™‚ã€ä¸€ç·’ã«è€ƒãˆã‚‹æ™‚ã§ãƒˆãƒ¼ãƒ³ã‚’å¤‰åŒ–
3. **ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®š**: å­ä¾›ãŒå¥½ããªã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼ˆãƒ­ãƒœãƒƒãƒˆã€é­”æ³•ä½¿ã„ã€å®‡å®™é£›è¡Œå£«ãªã©ï¼‰ã‚’é¸æŠå¯èƒ½
4. **ã‚²ãƒ¼ãƒ æ¼”å‡º**: ãƒ’ãƒ³ãƒˆã¯ã€Œå®ç®±ã‚’é–‹ã‘ã‚‹ã€æ¼”å‡ºã§ã‚²ãƒ¼ãƒ æ„Ÿè¦šã«

### Privacy & Security

- å­ä¾›ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†ãŸã‚ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·ã¯æœ€å„ªå…ˆ
- å­¦ç¿’å±¥æ­´ã®è¨˜éŒ²: å•é¡Œã”ã¨ã®æ­£ç­”ç‡ã€ãƒ’ãƒ³ãƒˆä½¿ç”¨å›æ•°
- ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–ã€GDPR/å€‹äººæƒ…å ±ä¿è­·æ³•æº–æ‹ 

## Repository Structure

**ãƒ¢ãƒãƒ¬ãƒ (Monorepo)** æ§‹æˆã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

```
homework-coach-robo/
â”œâ”€â”€ frontend/                 # Next.js 16 (App Router)
â”‚   â”œâ”€â”€ src/app/              # ãƒšãƒ¼ã‚¸ãƒ»ãƒ«ãƒ¼ãƒˆï¼ˆNext.js 16ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ§‹é€ ï¼‰
â”‚   â”œâ”€â”€ components/           # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ui/               # æ±ç”¨UI
â”‚   â”‚   â”œâ”€â”€ features/         # æ©Ÿèƒ½åˆ¥
â”‚   â”‚   â””â”€â”€ layouts/          # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ lib/                  # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ api/              # APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ hooks/            # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ store/                # Jotai atoms
â”‚   â””â”€â”€ types/                # TypeScriptå‹å®šç¾©
â”‚
â”œâ”€â”€ backend/                  # FastAPI + Python
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ api/v1/           # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚       â”œâ”€â”€ services/         # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚       â”‚   â””â”€â”€ adk/          # Google ADKé–¢é€£
â”‚       â”œâ”€â”€ models/           # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚       â”œâ”€â”€ schemas/          # APIã‚¹ã‚­ãƒ¼ãƒ
â”‚       â””â”€â”€ db/               # DBæ¥ç¶š
â”‚
â”œâ”€â”€ poc/                      # æŠ€è¡“æ¤œè¨¼ï¼ˆPoCï¼‰å®Ÿè£…
â”‚   â”œâ”€â”€ server/               # FastAPI + ADK + Gemini Live API
â”‚   â””â”€â”€ client/               # Web Audio APIãƒ†ã‚¹ãƒˆUI
â”‚
â”œâ”€â”€ shared/                   # å…±é€šãƒªã‚½ãƒ¼ã‚¹
â”œâ”€â”€ infrastructure/           # Terraform, Cloud Build
â”œâ”€â”€ docs/                     # è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ .tree/                    # âš ï¸ git worktreeï¼ˆä¸¦åˆ—é–‹ç™ºç”¨ã€è§¦ã‚Œãªã„ï¼‰
â”‚   â”œâ”€â”€ backend/              # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä½œæ¥­ç”¨worktree
â”‚   â””â”€â”€ frontend/             # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä½œæ¥­ç”¨worktree
â”‚
â””â”€â”€ .claude/
    â”œâ”€â”€ rules/                # é–‹ç™ºãƒ«ãƒ¼ãƒ«ï¼ˆè‡ªå‹•èª­ã¿è¾¼ã¿ï¼‰
    â””â”€â”€ skills/               # ã‚¹ã‚­ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«
```

> **âš ï¸ `.tree/` ã¯ git worktree ç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã™ã€‚ä»–ã®worktreeã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿æ›¸ãã—ã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚è©³ç´°ã¯ `.claude/rules/git-worktree.md` ã‚’å‚ç…§ã€‚**

**å‘½åè¦å‰‡ãƒ»é…ç½®ãƒ«ãƒ¼ãƒ«ã®è©³ç´°ã¯ `.claude/rules/file-structure-rules.md` ã‚’å‚ç…§ã€‚**

## Documentation

- `docs/product-requirements.md`: ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆè¦æ±‚ä»•æ§˜æ›¸ï¼ˆãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã€æ©Ÿèƒ½è¦ä»¶ã€KPIï¼‰
- `docs/functional-design.md`: æ©Ÿèƒ½è¨­è¨ˆæ›¸ï¼ˆã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€APIä»•æ§˜ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ï¼‰
- `docs/architecture.md`: æŠ€è¡“ä»•æ§˜æ›¸ï¼ˆæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã€ã‚¤ãƒ³ãƒ•ãƒ©è¨­è¨ˆã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ï¼‰
- `docs/firestore-design.md`: Firestoreã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆï¼ˆãƒ‡ãƒ¼ã‚¿æ§‹é€ ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ï¼‰
- `docs/agent-architecture.md`: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸ï¼ˆãƒ„ãƒ¼ãƒ«ã€ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€RAGã€æ„Ÿæƒ…é©å¿œã€Agent Engineï¼‰
- `docs/implementation-status.md`: å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ã®è©³ç´°è¨˜éŒ²ï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€APIä»•æ§˜ã€ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒï¼‰

## Development Context

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ç¾åœ¨ã€**MVPå®Ÿè£…å®Œäº†ãƒ»Phase 2dï¼ˆæ„Ÿæƒ…é©å¿œï¼‰å®Ÿè£…å®Œäº†ãƒ»Phase 2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰WebSocketãƒãƒ³ãƒ‰ãƒ©çµ±åˆå®Œäº†**ã®æ®µéšã§ã™ã€‚

- å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ã®è©³ç´°: [`docs/implementation-status.md`](docs/implementation-status.md)
- Phase 2ã€œ3 ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—: [GitHub Milestones](https://github.com/arakitakashi/homework-coach-robo/milestones)
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ: [`docs/agent-architecture.md`](docs/agent-architecture.md)

### ADK ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆPhase 2 è¨ˆç”»ï¼‰

Phase 2aï¼ˆADK Function Toolsï¼‰ã€Phase 2bï¼ˆãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ§‹æˆï¼‰ã€Phase 2cï¼ˆMemory Bankçµ±åˆï¼‰ã€Phase 2dï¼ˆæ„Ÿæƒ…é©å¿œï¼‰ã‚’å°å…¥æ¸ˆã¿ã€‚Phase 3 ã§ Agent Engine ãƒãƒãƒ¼ã‚¸ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¨ˆç”»ã€‚

| Phase | å†…å®¹ | ä¸»è¦å¤‰æ›´ |
|-------|------|---------|
| **2a** âœ… | ãƒ„ãƒ¼ãƒ«å°å…¥ï¼ˆFunction Callingï¼‰ | `calculate_tool`, `manage_hint_tool`, `record_progress_tool`, `check_curriculum_tool`, `analyze_image_tool` |
| **2b** âœ… | ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | Router Agent â†’ Math Coach / Japanese Coach / Encouragement / Review Agent |
| **2c** âœ… | Memory Bank çµ±åˆ | `VertexAiMemoryBankService` ãƒ•ã‚¡ã‚¯ãƒˆãƒª + Agent Engine + `load_memory` ãƒ„ãƒ¼ãƒ« |
| **2d** âœ… | æ„Ÿæƒ…é©å¿œ | `update_emotion_tool` + Router Agent æ„Ÿæƒ…ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° + ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ„Ÿæƒ…ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ â€»AutoMLã¯å°†æ¥æ¤œè¨ï¼ˆ#52ï¼‰ |
| **3** | Agent Engine | Phase 2c ã§ Agent Engine åŸºç›¤æ§‹ç¯‰æ¸ˆã¿ã€‚ãƒãƒãƒ¼ã‚¸ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ Phase 2 å®Œäº†å¾Œ â€»A/Bãƒ†ã‚¹ãƒˆã¯å°†æ¥æ¤œè¨ï¼ˆ#55ï¼‰ |

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ Phase 2 å¯¾å¿œçŠ¶æ³:**
- âœ… å‹å®šç¾©ï¼ˆ`frontend/types/phase2.ts`ï¼‰: Phase 2a-2d å…¨ã‚µãƒ–ãƒ•ã‚§ãƒ¼ã‚ºã®25å‹å®šç¾©ï¼ˆPR #60ï¼‰
- âœ… çŠ¶æ…‹ç®¡ç†ï¼ˆ`frontend/store/atoms/phase2.ts`ï¼‰: 12å€‹ã®Jotai atomsï¼ˆ11 writable + 1 derivedï¼‰
- âœ… æ—¢å­˜å‹ã®å¾Œæ–¹äº’æ›æ‹¡å¼µ: `DialogueTurn`, `LearningProgress`, `WebSocketIncomingMessage`
- âœ… Phase 2a ãƒ„ãƒ¼ãƒ«å®Ÿè¡ŒçŠ¶æ…‹UIï¼ˆPR #74ï¼‰: `ToolExecutionDisplay`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ + WebSocket/ãƒ•ãƒƒã‚¯æ‹¡å¼µ + SessionContentçµ±åˆ
- âœ… Phase 2 WebSocketãƒãƒ³ãƒ‰ãƒ©çµ±åˆï¼ˆPR #77ï¼‰: AgentTransitionãƒ»EmotionUpdate ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ© + Jotai atomsæ¥ç¶š
- âœ… ãƒ†ã‚¹ãƒˆ: 291ãƒ†ã‚¹ãƒˆï¼ˆ26ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

**Phase 2 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ:**
```
backend/app/services/adk/
â”œâ”€â”€ agents/                   # âœ… ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ï¼ˆPhase 2b å®Ÿè£…æ¸ˆã¿ï¼‰
â”‚   â”œâ”€â”€ __init__.py           # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ router.py             # Router Agentï¼ˆAutoFlowå§”è­²ã€tools=[update_emotion]ï¼‰
â”‚   â”œâ”€â”€ math_coach.py         # ç®—æ•°ã‚³ãƒ¼ãƒï¼ˆ4ãƒ„ãƒ¼ãƒ«ï¼‰
â”‚   â”œâ”€â”€ japanese_coach.py     # å›½èªã‚³ãƒ¼ãƒï¼ˆ3ãƒ„ãƒ¼ãƒ«ï¼‰
â”‚   â”œâ”€â”€ encouragement.py      # åŠ±ã¾ã—ï¼ˆ1ãƒ„ãƒ¼ãƒ«ï¼‰
â”‚   â”œâ”€â”€ review.py             # æŒ¯ã‚Šè¿”ã‚Šï¼ˆ2ãƒ„ãƒ¼ãƒ«: progress + load_memoryï¼‰
â”‚   â””â”€â”€ prompts/              # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
â”‚       â”œâ”€â”€ router.py
â”‚       â”œâ”€â”€ math_coach.py
â”‚       â”œâ”€â”€ japanese_coach.py
â”‚       â”œâ”€â”€ encouragement.py
â”‚       â””â”€â”€ review.py
â”œâ”€â”€ tools/                    # âœ… ADK Function Toolsï¼ˆPhase 2a + 2d å®Ÿè£…æ¸ˆã¿ï¼‰
â”‚   â”œâ”€â”€ __init__.py           # ãƒ„ãƒ¼ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ calculate.py          # è¨ˆç®—æ¤œè¨¼
â”‚   â”œâ”€â”€ hint_manager.py       # ãƒ’ãƒ³ãƒˆæ®µéšç®¡ç†
â”‚   â”œâ”€â”€ curriculum.py         # ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ å‚ç…§
â”‚   â”œâ”€â”€ progress_recorder.py  # é€²æ—è¨˜éŒ²
â”‚   â”œâ”€â”€ image_analyzer.py     # ç”»åƒåˆ†æ
â”‚   â””â”€â”€ emotion_analyzer.py   # æ„Ÿæƒ…åˆ†æï¼ˆPhase 2dï¼‰
â”œâ”€â”€ runner/                   # æ—¢å­˜ï¼ˆRouter Agentçµ±åˆæ¸ˆã¿ï¼‰
â”œâ”€â”€ sessions/                 # æ—¢å­˜
â””â”€â”€ memory/                   # âœ… Phase 2c: ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ã§ Memory Bank åˆ‡ã‚Šæ›¿ãˆ
    â”œâ”€â”€ memory_factory.py     # create_memory_service() ãƒ•ã‚¡ã‚¯ãƒˆãƒª
    â”œâ”€â”€ firestore_memory_service.py  # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    â””â”€â”€ converters.py
```

è©³ç´°ã¯ `docs/agent-architecture.md` ã‚’å‚ç…§ã€‚

### ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£æ¦‚è¦

```
infrastructure/terraform/
â”œâ”€â”€ bootstrap/                 # State Bucket + APIæœ‰åŠ¹åŒ–
â”œâ”€â”€ shared/                    # Providerè¨­å®š
â”œâ”€â”€ modules/                   # vpc, iam, secret_manager, firestore, bigquery,
â”‚                              # cloud_storage, cloud_run, github_wif
â””â”€â”€ environments/dev/          # é–‹ç™ºç’°å¢ƒè¨­å®š
```

**CI/CD:**
- `.github/workflows/ci-backend.yml` - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰CIï¼ˆlint, type check, testï¼‰
- `.github/workflows/ci-frontend.yml` - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰CIï¼ˆlint, type check, testï¼‰
- `.github/workflows/ci-e2e.yml` - E2Eãƒ†ã‚¹ãƒˆï¼ˆDocker Compose + Playwrightï¼‰
- `.github/workflows/cd.yml` - è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆpush to mainï¼‰
- `.github/workflows/deploy.yml` - ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆworkflow_dispatchï¼‰

è©³ç´°ã¯ [`docs/implementation-status.md`](docs/implementation-status.md) ã‚’å‚ç…§ã€‚

### é–‹ç™ºæ–¹é‡

- **ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰ã‚’å¾¹åº•**: t_wadaãŒæå”±ã™ã‚‹Red-Green-Refactorã‚µã‚¤ã‚¯ãƒ«ã‚’å®Ÿè·µ
- **å°ã•ãå§‹ã‚ã‚‹**: MVPã«å¿…è¦ãªæ©Ÿèƒ½ã®ã¿ã‚’å®Ÿè£…
- **å“è³ªã‚’å„ªå…ˆ**: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Šã‚’ç¶­æŒ

## Important Notes

- **ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å°å­¦æ ¡ä½å­¦å¹´**: UIã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å¹³æ˜“ãªæ—¥æœ¬èªã§
- **å­¦ç¿’åŠ¹æœã®æœ€å¤§åŒ–**: å˜ãªã‚‹å›ç­”æä¾›ãƒ„ãƒ¼ãƒ«ã§ã¯ãªãã€æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è‚²ã¦ã‚‹ã“ã¨ãŒç›®çš„
- **æˆé•·ãƒã‚¤ãƒ³ãƒ‰ã‚»ãƒƒãƒˆ**: æ­£è§£ã ã‘ã§ãªãã€æŒ‘æˆ¦ã—ãŸã“ã¨ã€é–“é•ã„ã‹ã‚‰å­¦ã‚“ã ã“ã¨ã‚’ç§°è³›

## Rules

é–‹ç™ºãƒ«ãƒ¼ãƒ«ã¯ `.claude/rules/` ã«é…ç½®ã•ã‚Œã¦ãŠã‚Šã€Claude Code ãŒè‡ªå‹•çš„ã«èª­ã¿è¾¼ã¿ã¾ã™ã€‚

| ãƒ«ãƒ¼ãƒ« | å†…å®¹ |
|--------|------|
| `pre-implementation-checklist.md` | å®Ÿè£…å‰ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ–ãƒ©ãƒ³ãƒã€ã‚¹ãƒ†ã‚¢ãƒªãƒ³ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰ã€**PRå‰CIå¿…é ˆãƒã‚§ãƒƒã‚¯** |
| `steering-workflow.md` | ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆrequirements/design/tasklistä½œæˆï¼‰ |
| `tdd-requirement.md` | TDDå¿…é ˆï¼ˆRed-Green-Refactorã€ã‚«ãƒãƒ¬ãƒƒã‚¸80%ï¼‰ã€**Vitest importãƒ«ãƒ¼ãƒ«** |
| `coding-standards.md` | ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ |
| `security-requirement.md` | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ |
| `file-structure-rules.md` | ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ãƒ»å‘½åè¦å‰‡ |
| `frontend.md` | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºãƒ«ãƒ¼ãƒ«ã€**Biome a11yãƒ«ãƒ¼ãƒ«ã€Jotaiãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³** |
| `auto-format-hooks.md` | è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆRuff/Biomeï¼‰ã¨ã®å…±å­˜æ–¹æ³• |
| `pr-checklist.md` | PRä½œæˆå‰ã®ãƒ­ãƒ¼ã‚«ãƒ«CIãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ |
| `git-worktree.md` | git worktreeä¸¦åˆ—é–‹ç™ºãƒ«ãƒ¼ãƒ«ï¼ˆ`.tree/`é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œç¦æ­¢ï¼‰ |

### ğŸ”´ PRä½œæˆå‰ã®å¿…é ˆã‚³ãƒãƒ³ãƒ‰

```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
cd frontend && bun lint && bun typecheck && bun test

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
cd backend && uv run ruff check . && uv run mypy . && uv run pytest
```

**CIã§å®Ÿè¡Œã•ã‚Œã‚‹å…¨ãƒã‚§ãƒƒã‚¯ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§äº‹å‰å®Ÿè¡Œã™ã‚‹ã“ã¨ã€‚**

## Available Skills

å®Ÿè£…æ™‚ã«æ´»ç”¨ã§ãã‚‹ã‚¹ã‚­ãƒ«ãŒ `.claude/skills/` ã«ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

| ã‚«ãƒ†ã‚´ãƒª | ã‚¹ã‚­ãƒ« |
|----------|--------|
| é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ | `/tdd`, `/git-workflow`, `/security-review` |
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | `/frontend`, `/frontend-design`, `/vercel-react-best-practices` |
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | `/fastapi`, `/google-adk-basics`, `/google-adk-live` |

**æ³¨æ„**: `/google-adk-live` ã¯ `/google-adk-basics` ã®çŸ¥è­˜ãŒå‰æã§ã™ã€‚
