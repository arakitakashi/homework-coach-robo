# Reflection

プロジェクト開発中の学びと反省を記録するドキュメント。

---

## 2026-02-04: CIエラー対応（Lintエラー）

### 発生した問題

PR #5 でCIが失敗。原因は以下の4つのLintエラー：

1. **I001**: インポートの順序が不正（2ファイル）
2. **F401**: 未使用のインポート（`MagicMock`）
3. **ARG002**: 未使用の関数引数（`basic_context`）
4. **Format**: `ruff format`チェック失敗

### 根本原因

**コミット前にローカルでLintチェックを実行しなかった。**

- `ruff check`を実行せずにコミット
- `ruff format`を実行せずにコミット
- CIで初めてエラーに気づき、後手の対応となった

### 反省点

1. **事前チェックの欠如**: ローカルでのLint/Format実行を怠った
2. **2回のCI失敗**: 最初の修正でもformatチェックを忘れ、再度失敗
3. **手戻りの発生**: 2回の追加コミットが必要になった

### 改善策

#### 即座に実行すべきこと

コミット前に必ず以下を実行する：

```bash
# バックエンド
cd backend
uv run ruff check . --fix  # Lintエラーを自動修正
uv run ruff format .        # フォーマット適用
uv run pytest              # テスト実行
```

#### 検討すべきこと

1. **pre-commitフックの導入**: コミット時に自動でLint/Formatを実行
2. **CIワークフローの改善**: Lint失敗時のエラーメッセージを分かりやすく
3. **開発フローへの組み込み**: ルールファイルにコミット前チェックを追記

### 学び

- CIはセーフティネットであり、最初の防衛線ではない
- ローカルでのチェックを習慣化することで、CIの失敗を防げる
- 小さなミスでも、積み重なると大きな手戻りになる
